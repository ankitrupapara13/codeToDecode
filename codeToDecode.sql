DROP TABLE APP.SESSIONENTITY;
CREATE TABLE APP.SESSIONENTITY(
	personId INT PRIMARY KEY,
	sessionToken varchar(400) NOT NULL
);
INSERT INTO APP.SESSIONENTITY VALUES(104, 'andjlkfan');
INSERT INTO APP.SESSIONENTITY VALUES(103, 'ldnzjlk');

DROP TABLE APP.COMPANY;
CREATE TABLE APP.COMPANY (
	companyName VARCHAR(50) NOT NULL,
	companyAddress VARCHAR(150) NOT NULL,
	companyCity VARCHAR(50) NOT NULL,
	gstNumber VARCHAR(20),
	PRIMARY KEY(gstNumber),
	createdAt TIME DEFAULT CURRENT_TIME,
	updatedAt TIME DEFAULT CURRENT_TIME
);
INSERT INTO APP.COMPANY VALUES('Ankit', 'Rajkot', 'Gujarat', '22AAAAA000021Z3', DEFAULT, default);
INSERT INTO APP.COMPANY VALUES('Ujjwal', 'Hyderabad', 'Gujarat', '22AAAAA000021Z4', DEFAULT, default);
INSERT INTO APP.COMPANY VALUES('Jay', 'Pune', 'Gujarat', '22AAAAA000021Z5', DEFAULT, default);


DROP TABLE APP.CUSTOMER;
CREATE TABLE APP.CUSTOMER (
    customerId INT PRIMARY KEY, 
    name VARCHAR(30) NOT NULL,
    gstNumber VARCHAR(20),
    address VARCHAR(50) NOT NULL,
    city VARCHAR(30) NOT NULL,
    email VARCHAR(30) NOT NULL,
    phone VARCHAR(10) NOT NULL UNIQUE,
    pincode VARCHAR(10) NOT NULL,
    password VARCHAR(400) NOT NULL,
    lastLogin TIME,
    createdAt TIME DEFAULT CURRENT_TIME,
    updatedAt TIME DEFAULT CURRENT_TIME
);
INSERT into APP.CUSTOMER VALUES(101, 'Rupali', '', 'Chandranagar, Ramnagar', 'Muradabad', 'rupalipricess@gamil.com', '9955233147', '244001', 'rupali101', DEFAULT, DEFAULT, DEFAULT);

DROP TABLE APP.EMPLOYEE;
CREATE TABLE APP.EMPLOYEE (
	employeeId INT PRIMARY KEY,
	userName VARCHAR(30) NOT NULL UNIQUE,
	password varchar(400)NOT NULL,
	lastLogin TIME,
	createdAt TIME DEFAULT CURRENT_TIME,
	updatedAt TIME DEFAULT CURRENT_TIME 
);
INSERT INTO APP.EMPLOYEE VALUES(1001, 'Tanisha', 'tanisha1001', CURRENT_TIME, CURRENT_TIME, CURRENT_TIME);
INSERT INTO APP.EMPLOYEE VALUES(1002, 'Aiman', 'aiman1002', CURRENT_TIME, CURRENT_TIME, CURRENT_TIME);
INSERT INTO APP.EMPLOYEE VALUES(1003, 'Ankit', 'ankit1003', CURRENT_TIME, CURRENT_TIME, CURRENT_TIME);

--DROP TABLE APP.GSTTYPE;
--CREATE TABLE APP.GSTTYPE (
--    gstTypeId INT PRIMARY KEY,
--	type varchar(20) NOT NULL
--);
--INSERT INTO APP.GSTTYPE VALUES(1, 'TYPE1');
--INSERT INTO APP.GSTTYPE VALUES(2, 'TYPE2');

DROP TABLE APP.INVOICE;
CREATE TABLE APP.INVOICE (
    invoiceId INT primary key,
    invoiceDate Date NOT NULL,
    orderId INT NOT NULL UNIQUE,
    gstType VARCHAR(20) CONSTRAINT gstType_ck CHECK (gstType IN ('INTER STATE', 'SAME STATE')),
    gstAmount FLOAT DEFAULT 0.0,
    totalInvoiceAmount FLOAT DEFAULT 0,
    status VARCHAR(10) CONSTRAINT statusInvoice_ck CHECK (status IN ('PAID', 'UNPAID')), 
    createdAt TIME DEFAULT CURRENT_TIME,
    updatedAt TIME DEFAULT CURRENT_TIME,
    FOREIGN KEY (orderId) REFERENCES APP.ORDERDETAILS(orderId)
);
--INSERT INTO APP.INVOICE VALUES(101, CURRENT_DATE, 55555, 'INTER STATE', 1052.16, 649464.65, 'UNPAID', DEFAULT, DEFAULT);
--INSERT INTO APP.INVOICE VALUES(102, CURRENT_DATE, 55556, 'INTER STATE', 1052.16, 649464.65, 'UNPAID', DEFAULT, DEFAULT);
--INSERT INTO APP.INVOICE VALUES(103, CURRENT_DATE, 55557, 'INTER STATE', 1052.16, 649464.65, 'UNPAID', DEFAULT, DEFAULT);


DROP TABLE APP.ORDERDETAILS;
CREATE TABLE APP.ORDERDETAILS (
    orderId INT,
    orderDate DATE DEFAULT CURRENT_DATE NOT NULL,
    customerId INT NOT NULL,
    employeeId INT NOT NULL,
    totalOrderValue DOUBLE NOT NULL, 
    shippingCost DOUBLE NOT NULL, 
    shippingCompany VARCHAR(20) NOT NULL,
    status VARCHAR(10) CONSTRAINT status_ck CHECK (status IN ('PENDING', 'APPROVED','COMPLETED','EXPIRED')),
    createdAt TIME DEFAULT CURRENT_TIME,
    updatedAt TIME DEFAULT CURRENT_TIME,   
    PRIMARY KEY(orderId),
    FOREIGN KEY (customerId) REFERENCES APP.CUSTOMER(customerId),
    FOREIGN KEY (employeeId) REFERENCES APP.EMPLOYEE(employeeId)
);
INSERT INTO APP.ORDERDETAILS VALUES(1001, DEFAULT, 103, 1002, 1321.56, 99.99, 'EKART', 'PENDING', default, default);
INSERT INTO APP.ORDERDETAILS VALUES(1002, DEFAULT, 103, 1003, 13211.56, 50.00, 'BLUEDART', 'PENDING', default, default);
INSERT INTO APP.ORDERDETAILS VALUES(1003, DEFAULT, 103, 1001, 684.56, 10.10, 'ATS', 'PENDING', default, default);


-- Single order can have multiple products
DROP TABLE APP.ORDERPRODUCTS;
CREATE TABLE APP.ORDERPRODUCTS (
    orderId int,
    productId int,  
    primary key (orderId, productId)
);
INSERT INTO APP.ORDERPRODUCTS VALUES(1001, 11);
INSERT INTO APP.ORDERPRODUCTS VALUES(1001, 12);
INSERT INTO APP.ORDERPRODUCTS VALUES(1002, 11);
INSERT INTO APP.ORDERPRODUCTS VALUES(1002, 13);
INSERT INTO APP.ORDERPRODUCTS VALUES(1003, 13);
--DROP TABLE APP.ORDERSTATUS;
--CREATE TABLE APP.ORDERSTATUS (
--        orderStatusId INT PRIMARY KEY,
--        status VARCHAR(20) NOT NULL
--);

DROP TABLE APP.PRODUCT;
CREATE TABLE APP.PRODUCT (
    productId int,
   	productName varchar(20) NOT NULL,
    productPrice float NOT NULL,
  	productCategory VARCHAR(10) CONSTRAINT productCategory_ck CHECK (productCategory IN ('LEVEL 1', 'LEVEL 2','LEVEL 3')),
 	companyId VARCHAR(20) NOT NULL,
    createdAt TIME DEFAULT CURRENT_TIME,
    updatedAt TIME DEFAULT CURRENT_TIME,
    PRIMARY KEY(productId),
    FOREIGN KEY (companyId) REFERENCES APP.COMPANY(gstNumber)
);
INSERT INTO APP.PRODUCT VALUES(11, 'TV', 60154.15, 'LEVEL 1', '22AAAAA000021Z3', DEFAULT, DEFAULT);
INSERT INTO APP.PRODUCT VALUES(12, 'Display', 20165.40, 'LEVEL 2', '22AAAAA000021Z4', DEFAULT, DEFAULT);
INSERT INTO APP.PRODUCT VALUES(13, 'Washing Machine', 12045.60, 'LEVEL 3', '22AAAAA000021Z5', DEFAULT, DEFAULT);


--DROP TABLE APP.PRODUCTCATEGORY;
--CREATE TABLE APP.PRODUCTCATEGORY (
--	categoryId int, 
--    categoryName varchar(20),
--    primary key (categoryId)
--);
--
--DROP TABLE APP.SHIPPINGCOMPANY;
--CREATE TABLE APP.SHIPPINGCOMPANY (
--    companyId int,
--    companyName varchar(20),  
--    primary key (companyId)
--);